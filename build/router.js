var t=this&&this.__awaiter||function(t,e,s,i){function n(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?s(t.value):n(t.value).then(r,a)}l((i=i.apply(t,e||[])).next())}))};import e from"express";import s from"formidable";import{connect as i,error as n}from"./helpers.js";const o=e.Router();i(),o.get("^/$|/index(.html)?",((t,e)=>{e.render("index",{stylesheet:"home.css",script:"",title:"Mairie de Rouffiac d'Aude"})})),o.get("/login(.html)?",((t,e)=>{e.render("login",{stylesheet:"login.css",script:"login.js",title:"Connexion"})})),o.get("/about(.html)?",((t,e)=>{e.render("about",{stylesheet:"about.css",script:"",title:"A propos"})})),o.get("/legal(.html)?",((t,e)=>{e.render("legal",{stylesheet:"legal.css",script:"",title:"Mentions légales"})})),o.get("/activities(.html)?",((t,e)=>{e.render("activities",{stylesheet:"activities.css",script:"",title:"Mentions légales"})})),o.get("/*",((t,e)=>{e.status(404).render("404",{stylesheet:"404.css",script:"",title:"Erreur"})})),o.post("/fetchTest",((t,e)=>{e.json({attribut1:1,attribut2:"blaaaa"})})),o.post("/login",((e,i)=>{s().parse(e,((s,o,r)=>t(void 0,void 0,void 0,(function*(){s&&(n("Unable to parse form data !"),i.status(400).json({sucess:!1}));const{email:t,password:r}=o;n({test:1}),"string"==typeof t&&"string"==typeof r?e.session.authenticated&&i.json(e.session):(n("Form data are missing or wrong type !"),i.status(400).json({sucess:!1}))}))))}));export{o as router};