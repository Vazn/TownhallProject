var e=this&&this.__awaiter||function(e,n,o,t){function i(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,r){function s(e){try{m(t.next(e))}catch(e){r(e)}}function c(e){try{m(t.throw(e))}catch(e){r(e)}}function m(e){e.done?o(e.value):i(e.value).then(s,c)}m((t=t.apply(e,n||[])).next())}))};import n from"express";import o from"express-session";import t from"mongoose";import i from"connect-mongo";import r from"cors";import s from"path";import c from"express-handlebars";import{port as m,url as a,corsOptions as u}from"./config/config.js";import{__dirname as f,error as p}from"./helpers.js";import{router as l}from"./router.js";const h=n(),g=v();function v(){return e(this,void 0,void 0,(function*(){try{return(yield t.connect(a)).connection.getClient()}catch(e){p(e)}}))}h.engine("hbs",c.engine({extname:"hbs",defaultLayout:"main"})),h.set("view engine","hbs"),h.set("views",s.join(f,"..","views")),h.use(n.static(f+"/public")),h.use(r(u)),h.use(o({name:"SessionID",secret:"Zfc15441%rza24\\razr[<",cookie:{maxAge:6048e5},saveUninitialized:!1,resave:!0,store:i.create({collectionName:"sessions",clientPromise:g})})),h.use(n.json()),h.use("/",l),h.listen(m,(()=>{console.log(`Server running on port ${m} ...`)}));